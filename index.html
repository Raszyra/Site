<!DOCTYPE html>
<!-- index.html -->
<!-- The official main page of Faction Seven Enterprises (courtesy of GitHub) -->

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> F7E </title>
    <link rel="stylesheet" href="style.css">

<script>
    document.addEventListener("DOMContentLoaded", function () {
        let targetPage = "other-page.html"; // Change to your target page
        let displayArea = document.getElementById("featured-link");

        if (!displayArea) {
            console.error("No element with ID 'featured-link' found.");
            return;
        }

        let savedLink = localStorage.getItem("featuredLink");
        let savedText = localStorage.getItem("featuredText");
        let lastUpdated = localStorage.getItem("featuredLinkTimestamp");

        let now = new Date().getTime();
        let oneDay = 24 * 60 * 60 * 1000; // Time interval to refresh (1 day)

        if (savedLink && lastUpdated && now - lastUpdated < oneDay) {
            // Use the stored link if it's fresh
            displayArea.innerHTML = `<a href="${savedLink}" target="_blank">${savedText}</a>`;
        } else {
            // Fetch new links if outdated or missing
            fetch(targetPage)
                .then(response => response.text())
                .then(html => {
                    let tempDiv = document.createElement("div");
                    tempDiv.innerHTML = html;

                    let allLinks = tempDiv.querySelectorAll("a");
                    let validLinks = Array.from(allLinks).filter(link => link.href);

                    if (validLinks.length > 0) {
                        let randomLink = validLinks[Math.floor(Math.random() * validLinks.length)];
                        let linkURL = randomLink.href;
                        let linkText = randomLink.textContent.trim() || linkURL;

                        // Store the new link and timestamp
                        localStorage.setItem("featuredLink", linkURL);
                        localStorage.setItem("featuredText", linkText);
                        localStorage.setItem("featuredLinkTimestamp", now);

                        // Display it immediately
                        displayArea.innerHTML = `<a href="${linkURL}" target="_blank">${linkText}</a>`;
                    } else {
                        console.warn("No valid links found.");
                        displayArea.textContent = "No links available.";
                    }
                })
                .catch(error => {
                    console.error("Error fetching links:", error);
                    displayArea.textContent = "Error loading link.";
                });
        }
    });
</script>

</head>
<body>
    <div class="main-content">

    <nav>
      <ul>
        <li><a href="about.html">About</a></li>
        <li><a href="downloads.html">Downloads</a></li>
        <li><a href="mailto:faction7entertainment@gmail.com" target="_blank">Contact</a></li>
      </ul>
    </nav>
        
    <header> 
        <h1> Faction Seven Entertainment </h1>
        <p> Focus, Dedication, and Third Party Software‚Ñ¢ </p>
        <img src="logo2_banner.jpg" alt="Logo" width="300px">
    </header>

    <section>
        <header> <h2> - News - </h2></header>
        <p> 
            03/02/25 - Look out for more <b>poetry</b> and <b>stories</b> coming soon! üååüó°Ô∏è‚ú®
            <br/>
            02/16/25 - <b>Open Alpha</b> testing for The Silver Flask is underway! Click 
              <a href="mailto:faction7entertainment@gmail.com" target="_blank"> here </a>
              to email for signup or more information.
        </p>
    </section>
        
    <br/> <br/>
        
    <section>
       <header> <h2> Featured: </h2> </header>
        <br/> <h4> The Silver Flask v0.5.6 is finally here! </h4> <br/>
       <a href="https://github.com/Raszyra/The-Silver-Flask/releases/tag/v0.5.6-alpha" target="_blank"> -  The Silver Flask (Latest Release)  -</a> <br/>
    </section>
        
    <br/><br/>
        
    <p> Bored? Here's a random link from around the site -> 
        <span id="featured-link">Loading...</span> </p>
    <br/>
        
    <br/> <br/>  
        
    <section>
        <h2> Contact: </h2>
        <a href="mailto:faction7entertainment@gmail.com" target="_blank"> faction7entertainment@gmail.com </a>
    </section>

    <br/> <br/>
        <a href="clicker.html" target="_blank"> Faction Clicker</a>
    <br/> <br/>
        
    </div>
    
<footer>
    <p>¬© 2020-2025 Will Hooker / Faction Seven (all rights reserved) </p>
</footer>
    
</body>
</html>
